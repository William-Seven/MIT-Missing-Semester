[编辑器 (Vim) · the missing semester of your cs education (missing-semester-cn.github.io)](https://missing-semester-cn.github.io/2020/editors/)
# Modal 模式

|   Key   |       Modal        |    Function    |
| :-----: | :----------------: | :------------: |
| `<Esc>` |    Noraml 正常模式     | 在文件中四处移动光标进行修改 |
|   `i`   |    Insert 插入模式     |      插入文本      |
|   `R`   |    Replace 替换模式    |      替换文本      |
|   `v`   |  Visual 可视模式 （一般）  |     选中文本块      |
|   `V`   |  Visual 可视模式 （行）   |     选中文本块      |
| `<C-v>` |  Visual 可视模式 （块）   |     选中文本块      |
|   `:`   | Command-Line 命令行模式 |      执行命令      |
# Operation 操作
## Command-Line 命令行模式
在正常模式下键入 `:` 进入命令行模式。 在键入 `:` 后，光标会立即跳到屏幕下方的命令行。 这个模式有很多功能，包括打开，保存，关闭文件，以及 退出 Vim。

|     Code     | Function  |
| :----------: | :-------: |
|     `:q`     | 退出（quit）  |
|    `:q!`     | 放弃所有改动并退出 |
|     `:w`     | 保存（write） |
|    `:wq`     |  保存然后退出   |
|  `:e {文件名}`  | 打开要编辑的文件  |
|    `:ls`     |  显示打开的缓存  |
| `:help {标题}` |  打开帮助文档   |

- `:help :w` 打开 `:w` 命令的帮助文档
- `:help w` 打开 `w` 移动的帮助文档

## Movement 移动
**正常模式**
- 基本移动: `hjkl` （左，下，上，右）
- 词（word）： `w` （下一个词）， `b` （词初）， `e` （词尾）
- 行： `0` （行初）， `^` （第一个非空格字符）， `$` （行尾）
- 屏幕： `H` （屏幕首行）， `M` （屏幕中间）， `L` （屏幕底部）
- 翻页： `Ctrl-u` （上翻）， `Ctrl-d` （下翻）
- 文件： `gg` （文件头）， `G` （文件尾）
- 行数： `:{行数}<CR>` 或者 `{行数}G`
- 杂项： `%` （找到配对，比如括号或者 /* \*/ 之类的注释对）
- 查找： `f{字符}`， `t{字符}`， `F{字符}`， `T{字符}`
    - 查找/到 向前/向后 在本行的{字符}
    - `,` / `;` 用于导航匹配
- 搜索: `/{正则表达式}`, `n` / `N` 用于导航匹配

可视化模式可以用移动命令来选中。

## Edits 编辑
**采用编辑命令和移动命令的组合来完成**
- `i` 进入插入模式（insert）
    - 但是对于操纵/编辑文本，不单想用退格键完成

- `O` / `o` 在之上/之下插入行（open）
- `d{移动命令}` delete {motion}
    - 例如，`dw` 删除词, `d$` 删除到行尾, `d0` 删除到行头。
- `c{移动命令}` change {motion}
    - 例如，`cw` 改变词
    - `c$` 可以替换当前光标到行末的内容
    - `c{motion}` 等同于 `d{motion}` 再 `i`进入编辑模式
- `x` 删除字符（等同于 `dl`）
- `s` 替换字符（等同于 `xi`）

- 可视化模式 + 移动操作
    - 选中文字, `d` 删除或者 `c` 改变

- `u` 撤销（undo）, `<C-r>` 重做（redo）
- `y` 复制 （yank）（其他一些命令比如 `d` 也会复制）
- `p` 粘贴
- `~` 改变字符的大小写

## Counts 计数
使用一个数字来结合 Movement 和 Edits，这会执行指定操作若干次。
- `3w` 向前移动三个词
- `5j` 向下移动5行
- `7dw` 删除7个词

## Modifiers 修饰语
用修饰语改变“名词”的意义。
 `i` 表示“inside”， `a` 表示“around”
- `ci(` 改变当前括号内的内容
- `ci[` 改变当前方括号内的内容
- `da'` 删除一个单引号字符串，包括周围的单引号

# Knowledge Point Collection 知识点收集
+ 欲插入或添加文本，请输入：
  `a`   在光标后插入文本
  `i`   在光标前插入文本
  `A`   在一行后添加文本

+ 欲撤消以前的操作，请输入：`u`
+ 欲撤消在一行中所做的改动，请输入：`U`
+ 欲撤消以前的撤消命令，恢复以前的操作结果，请输入：`CTRL-R`

+ `p`: **重新置入已经删除的文本内容**。该操作可以将已删除的文本内容置于光标之后。如果最后一次删除的是一个整行，那么该行将置于当前光标所在行的下一行。

+ `r`: 替换光标所在位置的字符，输入 ` r ` 和要替换掉原位置字符的新字符即可。

+ 按下 `CTRL` 键不放开然后按 `g` 键。我们称这个键组合为 `CTRL-G`。页面最底部出现一个状态信息行，显示当前编辑的文件名和文件中光标位置。

+ **替换字符串**
  在一行内替换头一个字符串 old 为新的字符串 new，输入  `:s/old/new`
  在一行内替换所有的字符串 old 为新的字符串 new，输入  `:s/old/new/g`
  在两行内替换所有 old 为 new，输入  `:#,#s/old/new/g`
  在文件内替换所有 old 为新的字符串 new，请输入  `:%s/old/new/g`
  进行全文替换时询问用户确认每个替换需添加 c 标志     `:%s/old/new/gc`

+ `:!command` 用于执行一个外部命令 command
+ `:w FILENAME`  可将当前 VIM 中正在编辑的文件保存到名为 FILENAME 的文件中。
+ `v motion :w FILENAME` 可将当前编辑文件中可视模式下选中的内容保存到文件 FILENAME 中。
+ `:r FILENAME` 可提取磁盘文件 FILENAME 并将其插入到当前文件的光标位置后面。
+ `:r !dir` 可以读取 dir 命令的输出并将其放置到当前文件的光标位置后面。

+ 输入 `:set xxx` 可以设置 xxx 选项。一些有用的选项如下：
  `ic` 'ignorecase'       查找时忽略字母大小写
  `is` 'incsearch'        查找短语时显示部分匹配
  `hls` 'hlsearch'        高亮显示所有的匹配短语
+ 在选项前加上 `no` 可以关闭选项：  `:set noic`

